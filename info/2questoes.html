<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulado EBTT - Hardware: Memórias</title>
    <style>
        :root {
            --bg-color: #fcfcfc;
            --text-color: #2d3436;
            --accent-color: #0984e3;
            --border-color: #dfe6e9;
            --correct-color: #27ae60;
            --incorrect-color: #c0392b;
            --shadow: 0 4px 6px rgba(0,0,0,0.05);
            --max-width: 850px;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.7;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header {
            width: 100%;
            background-color: #fff;
            border-bottom: 1px solid var(--border-color);
            padding: 2rem 1rem;
            text-align: center;
            margin-bottom: 2rem;
        }

        header h1 {
            margin: 0;
            font-size: 1.8rem;
            color: #1e272e;
        }

        header p {
            margin: 0.5rem 0 0;
            color: #636e72;
            font-size: 1rem;
        }

        .container {
            max-width: var(--max-width);
            width: 90%;
            margin-bottom: 5rem;
        }

        .question-card {
            background: #fff;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .question-header {
            font-weight: bold;
            font-size: 0.9rem;
            color: var(--accent-color);
            text-transform: uppercase;
            margin-bottom: 0.5rem;
            display: block;
        }

        .question-text {
            font-size: 1.15rem;
            margin-bottom: 1.5rem;
            color: #2d3436;
        }

        .options-list {
            list-style: none;
            padding: 0;
        }

        .option-item {
            margin-bottom: 0.8rem;
        }

        .option-label {
            display: flex;
            align-items: center;
            padding: 1rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .option-label:hover {
            background-color: #f1f2f6;
            border-color: var(--accent-color);
        }

        .option-label input {
            margin-right: 1rem;
            transform: scale(1.2);
        }

        /* Classes para o resultado */
        .option-label.correct {
            background-color: #eafaf1;
            border-color: var(--correct-color);
            color: var(--correct-color);
            font-weight: bold;
        }

        .option-label.incorrect {
            background-color: #fdedec;
            border-color: var(--incorrect-color);
            color: var(--incorrect-color);
        }

        .submit-area {
            text-align: center;
            margin: 3rem 0;
        }

        #btn-submit {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 1rem 3rem;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
            box-shadow: 0 4px 15px rgba(9, 132, 227, 0.3);
        }

        #btn-submit:hover {
            background-color: #0873c4;
            transform: translateY(-2px);
        }

        #results-panel {
            display: none;
            background: #fff;
            border: 2px solid var(--accent-color);
            border-radius: 8px;
            padding: 2rem;
            margin-top: 2rem;
            text-align: center;
        }

        .score-box {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .resolutions-section {
            display: none;
            margin-top: 3rem;
            border-top: 2px solid var(--border-color);
            padding-top: 2rem;
        }

        .resolution-item {
            background: #fff;
            border-left: 5px solid var(--accent-color);
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-radius: 4px;
            box-shadow: var(--shadow);
        }

        .resolution-title {
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 1rem;
            display: block;
            color: #1e272e;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th, td {
            border: 1px solid var(--border-color);
            padding: 0.8rem;
            text-align: left;
        }

        th {
            background-color: #f8f9fa;
        }

        pre {
            background: #f1f2f6;
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
            font-family: monospace;
        }

        code {
            font-family: 'Courier New', Courier, monospace;
            background: #f1f2f6;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
        }

        @media (max-width: 600px) {
            .container { width: 95%; }
            .question-card { padding: 1.2rem; }
            header h1 { font-size: 1.4rem; }
        }
    </style>
</head>
<body>

<header>
    <h1>Simulado EBTT: Hardware e Memórias</h1>
    <p>Foco: Estilo Fundação CEFETMINAS / FCM</p>
</header>

<div class="container">
    <div id="quiz-form">
        <!-- As questões serão inseridas via JS para manter o HTML limpo -->
        <div id="questions-container"></div>

        <div class="submit-area">
            <button id="btn-submit" onclick="gradeQuiz()">Finalizar e Ver Resoluções</button>
        </div>
    </div>

    <div id="results-panel">
        <div class="score-box" id="score-text"></div>
        <p>Confira abaixo a resolução detalhada de cada item.</p>
    </div>

    <div id="resolutions" class="resolutions-section">
        <h2 style="text-align: center; margin-bottom: 2rem;">Resolução Comentada</h2>
        <div id="resolutions-container"></div>
    </div>
</div>

<script>
    const questions = [
        {
            id: 1,
            text: "A hierarquia de memória é projetada para mitigar o gargalo de Von Neumann, explorando o comportamento de acesso a dados dos programas... analise as afirmativas abaixo sobre os princípios de localidade e o funcionamento da memória cache:<br><br>I. A Localidade Temporal refere-se à tendência de um programa referenciar novamente, em um curto espaço de tempo, os mesmos endereços de memória recentemente acessados...<br>II. A Localidade Espacial dita que, se um item de memória é referenciado, é altamente provável que itens com endereços fisicamente contíguos sejam referenciados em breve...<br>III. Em uma organização de cache totalmente associativa, um bloco da memória principal pode ser colocado em qualquer linha da cache... eliminando os conflitos de mapeamento...<br>IV. A política de escrita Write-Back atualiza a memória principal simultaneamente à atualização da cache...<br>V. O Tempo Médio de Acesso à Memória (AMAT) é calculado pela somatória do tempo de acesso da cache com o produto da taxa de falha pela penalidade de falha...",
            options: {
                A: "I, II e IV.",
                B: "I, II, III e V.",
                C: "II, III e IV.",
                D: "I, III e V.",
                E: "II, IV e V."
            },
            correct: "B",
            resolution: "<b>Gabarito: B.</b> Os itens I, II, III e V estão corretos. O erro do item IV é a inversão das definições: Write-Back atualiza apenas a cache (usa dirty bit), enquanto Write-Through atualiza cache e RAM simultaneamente."
        },
        {
            id: 2,
            text: "I. As memórias do tipo DRAM são universalmente adotadas para compor a memória principal devido à sua alta densidade e menor custo...<br><br>PORQUE<br><br>II. A célula de memória DRAM armazena a informação na forma de carga elétrica em um capacitor microscópico que perde a carga em milissegundos, exigindo operações de refresh.",
            options: {
                A: "As asserções I e II são proposições verdadeiras, e a II é uma justificativa correta da I.",
                B: "As asserções I e II são proposições verdadeiras, mas a II não é uma justificativa correta da I.",
                C: "A asserção I é uma proposição verdadeira, e a II é uma proposição falsa.",
                D: "A asserção I é uma proposição falsa, e a II é uma proposição verdadeira.",
                E: "As asserções I e II são falsas."
            },
            correct: "A",
            resolution: "<b>Gabarito: A.</b> A estrutura física simples da DRAM (1 capacitor) permite o baixo custo e alta densidade (Asserção I), e essa mesma estrutura capacitiva gera a necessidade de refresh (Asserção II)."
        },
        {
            id: 3,
            text: "Sistema de 32 bits, página de 4 KB (2^12 bytes). Endereço Virtual gerado: 0x000030A4. Tabela de Página aponta que VPN 0x00003 mapeia para PFN 0x000CC (Validade=1). Qual o endereço físico?",
            options: {
                A: "Ocorre uma Falta de Página (Page Fault).",
                B: "O endereço físico calculado é 0x00CC0A4.",
                C: "O endereço físico calculado é 0x000CC3A4.",
                D: "O endereço físico resultante é 0x00CC00A4.",
                E: "Ocorre uma violação de acesso (Segmentation Fault)."
            },
            correct: "B",
            resolution: "<b>Gabarito: B.</b> O endereço virtual 0x000030A4 tem VPN 0x00003 e Offset 0x0A4. Substituindo o VPN pelo PFN (0x000CC) e concatenando com o offset, temos 0x00CC0A4."
        },
        {
            id: 4,
            text: "Associe as memórias: ( ) Células em série, alta densidade, usada em SSDs. ( ) Acesso aleatório, execução direta (XIP), usada para Firmwares. ( ) Apagamento elétrico por byte, alto custo. ( ) Requer luz UV para apagamento.",
            options: {
                A: "4, 3, 2, 1.",
                B: "3, 4, 2, 1.",
                C: "4, 1, 2, 3.",
                D: "1, 2, 4, 3.",
                E: "3, 2, 1, 4."
            },
            correct: "A",
            resolution: "<b>Gabarito: A.</b> 4 (Flash NAND), 3 (Flash NOR), 2 (EEPROM), 1 (EPROM)."
        },
        {
            id: 5,
            text: "Sobre SSDs: I. TRIM notifica páginas inválidas. II. Amplificação de Escrita (WA) ocorre pela movimentação de dados em blocos. III. Over-provisioning reserva espaço para manutenção. IV. QLC oferece maior durabilidade que SLC.",
            options: {
                A: "I e II, apenas.",
                B: "II e IV, apenas.",
                C: "I, II e III, apenas.",
                D: "III e IV, apenas.",
                E: "I, II, III e IV."
            },
            correct: "C",
            resolution: "<b>Gabarito: C.</b> QLC armazena 4 bits por célula e é a tecnologia MENOS durável. SLC (1 bit) é a mais durável. Os itens I, II e III descrevem corretamente o funcionamento do SSD."
        },
        {
            id: 6,
            text: "DDR5 introduziu mudanças significativas na arquitetura do módulo DIMM. Um módulo DDR5 padrão implementa:",
            options: {
                A: "Um barramento único de 128 bits.",
                B: "Dois sub-canais independentes de 32 bits.",
                C: "Quatro canais de 16 bits.",
                D: "A manutenção do barramento de 64 bits com sinalização diferencial total.",
                E: "Integração do IMC no PCB do módulo."
            },
            correct: "B",
            resolution: "<b>Gabarito: B.</b> A DDR5 divide o barramento de 64 bits em dois canais independentes de 32 bits para melhorar a eficiência de concorrência de acesso."
        },
        {
            id: 7,
            text: "No protocolo MESI de coerência de cache, o estado Modified (M) significa:",
            options: {
                A: "Linha presente apenas nesta cache e igual à RAM.",
                B: "Linha presente em múltiplas caches e igual à RAM.",
                C: "Linha presente apenas nesta cache, modificada (suja) em relação à RAM.",
                D: "Linha inválida.",
                E: "Linha carregada especulativamente."
            },
            correct: "C",
            resolution: "<b>Gabarito: C.</b> Modified (M) indica que o dado é exclusivo daquela cache e foi alterado, estando diferente da memória principal."
        },
        {
            id: 8,
            text: "Processador Big-Endian armazena 0xAABBCCDD no endereço 0x1000. Qual o conteúdo no endereço 0x1002?",
            options: {
                A: "0xAA",
                B: "0xBB",
                C: "0xCC",
                D: "0xDD",
                E: "0x00"
            },
            correct: "C",
            resolution: "<b>Gabarito: C.</b> Em Big-Endian, o MSB (AA) vai no endereço base. 1000=AA, 1001=BB, 1002=CC, 1003=DD."
        },
        {
            id: 9,
            text: "Sobre Memória ECC (SEC-DED):",
            options: {
                A: "Requer bits de paridade que dobram a largura do barramento.",
                B: "Detecta e corrige erro de bit único automaticamente sem interromper o processo.",
                C: "Corrige erros de até 4 bits adjacentes.",
                D: "Implementada exclusivamente via Software no S.O.",
                E: "Equivalente à paridade simples."
            },
            correct: "B",
            resolution: "<b>Gabarito: B.</b> O SEC-DED (Single Error Correction, Double Error Detection) corrige automaticamente 1 bit e detecta 2 bits. Requer suporte em hardware."
        },
        {
            id: 10,
            text: "RAID 6 com 6 discos de 4 TB. Qual a capacidade útil e tolerância?",
            options: {
                A: "24 TB, sem paridade.",
                B: "16 TB, suporta falha de até 2 discos.",
                C: "12 TB, suporta falha de até 3 discos.",
                D: "Performance de escrita superior ao RAID 10.",
                E: "Perda total se o segundo disco falhar antes do rebuild."
            },
            correct: "B",
            resolution: "<b>Gabarito: B.</b> RAID 6 usa dupla paridade (n-2). Logo (6-2)*4 = 16 TB úteis, suportando a quebra de até 2 discos."
        }
    ];

    function initQuiz() {
        const container = document.getElementById('questions-container');
        const resContainer = document.getElementById('resolutions-container');

        questions.forEach((q, index) => {
            // Renderizar Questão
            const qDiv = document.createElement('div');
            qDiv.className = 'question-card';
            qDiv.id = `q-card-${q.id}`;
            
            let optionsHtml = '';
            for (let opt in q.options) {
                optionsHtml += `
                    <div class="option-item">
                        <label class="option-label" for="q${q.id}${opt}" id="label-q${q.id}${opt}">
                            <input type="radio" name="question${q.id}" value="${opt}" id="q${q.id}${opt}">
                            ${opt}) ${q.options[opt]}
                        </label>
                    </div>
                `;
            }

            qDiv.innerHTML = `
                <span class="question-header">Questão ${index + 1}</span>
                <div class="question-text">${q.text}</div>
                <div class="options-list">${optionsHtml}</div>
            `;
            container.appendChild(qDiv);

            // Renderizar Resolução (inicialmente oculta)
            const rDiv = document.createElement('div');
            rDiv.className = 'resolution-item';
            rDiv.innerHTML = `
                <span class="resolution-title">Questão ${index + 1}: Análise</span>
                <p>${q.resolution}</p>
            `;
            resContainer.appendChild(rDiv);
        });
    }

    function gradeQuiz() {
        let score = 0;
        let answeredAll = true;

        questions.forEach(q => {
            const selected = document.querySelector(`input[name="question${q.id}"]:checked`);
            if (!selected) {
                answeredAll = false;
            }
        });

        if (!answeredAll) {
            if(!confirm("Você deixou questões em branco. Deseja finalizar assim mesmo?")) return;
        }

        // Processar respostas
        questions.forEach(q => {
            const selected = document.querySelector(`input[name="question${q.id}"]:checked`);
            const correctLabel = document.getElementById(`label-q${q.id}${q.correct}`);
            
            // Marcar a correta
            correctLabel.classList.add('correct');

            if (selected) {
                if (selected.value === q.correct) {
                    score++;
                } else {
                    // Marcar a incorreta selecionada
                    const wrongLabel = document.getElementById(`label-q${q.id}${selected.value}`);
                    wrongLabel.classList.add('incorrect');
                }
            }
            
            // Desabilitar inputs
            const inputs = document.querySelectorAll(`input[name="question${q.id}"]`);
            inputs.forEach(i => i.disabled = true);
        });

        // Mostrar Painel de Resultados
        const resultsPanel = document.getElementById('results-panel');
        const scoreText = document.getElementById('score-text');
        const resolutions = document.getElementById('resolutions');

        resultsPanel.style.display = 'block';
        scoreText.innerText = `Você acertou ${score} de ${questions.length} questões!`;
        scoreText.style.color = score >= 7 ? 'var(--correct-color)' : 'var(--incorrect-color)';
        
        resolutions.style.display = 'block';

        // Scroll suave para o resultado
        resultsPanel.scrollIntoView({ behavior: 'smooth' });
        
        // Esconder botão
        document.getElementById('btn-submit').style.display = 'none';
    }

    window.onload = initQuiz;
</script>

</body>
</html>