<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulado: Gerenciamento de Redes - FCM</title>
    <style>
        :root {
            --bg-color: #fcfcfc;
            --text-color: #2d3436;
            --primary-color: #0984e3;
            --secondary-color: #636e72;
            --correct-color: #27ae60;
            --wrong-color: #d63031;
            --border-color: #dfe6e9;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 850px;
            margin: 40px auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 50px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 20px;
        }

        header h1 {
            font-size: 2rem;
            color: var(--text-color);
            margin-bottom: 10px;
        }

        header p {
            color: var(--secondary-color);
            font-size: 1.1rem;
        }

        .question-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.02);
            transition: transform 0.2s ease;
        }

        .question-header {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 15px;
            display: block;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .context {
            font-style: italic;
            color: var(--secondary-color);
            margin-bottom: 20px;
            font-size: 0.95rem;
            background: #f1f2f6;
            padding: 15px;
            border-radius: 4px;
        }

        .enunciado {
            font-size: 1.15rem;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .options {
            list-style: none;
            padding: 0;
        }

        .option-item {
            margin-bottom: 12px;
            display: flex;
            align-items: flex-start;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-item:hover {
            background-color: #f1f9ff;
            border-color: var(--primary-color);
        }

        .option-item input {
            margin-top: 5px;
            margin-right: 15px;
            cursor: pointer;
        }

        .option-item label {
            cursor: pointer;
            width: 100%;
        }

        /* Classes para o Resultado */
        .option-item.selected {
            border-color: var(--primary-color);
            background-color: #ebf7ff;
        }

        .option-item.correct {
            border-color: var(--correct-color) !important;
            background-color: #e6ffed !important;
            font-weight: bold;
        }

        .option-item.wrong {
            border-color: var(--wrong-color) !important;
            background-color: #fff5f5 !important;
        }

        .resolution-box {
            display: none;
            margin-top: 25px;
            padding: 20px;
            background-color: #f8f9fa;
            border-left: 4px solid var(--primary-color);
            border-radius: 0 4px 4px 0;
            font-size: 0.95rem;
        }

        .resolution-box h4 {
            margin-top: 0;
            color: var(--primary-color);
        }

        .submit-container {
            text-align: center;
            margin: 50px 0;
        }

        #submit-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(9, 132, 227, 0.3);
            transition: all 0.3s;
        }

        #submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(9, 132, 227, 0.4);
        }

        #result-summary {
            display: none;
            text-align: center;
            padding: 40px;
            background: var(--primary-color);
            color: white;
            border-radius: 8px;
            margin-bottom: 40px;
        }

        #result-summary h2 {
            font-size: 2.5rem;
            margin: 0;
        }

        .score-text {
            font-size: 1.2rem;
            margin-top: 10px;
        }

        footer {
            text-align: center;
            color: var(--secondary-color);
            margin-top: 50px;
            font-size: 0.85rem;
            padding-bottom: 30px;
        }

        @media (max-width: 600px) {
            .container { padding: 10px; }
            .question-card { padding: 20px; }
            header h1 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Simulado Técnico CEFETMINAS</h1>
        <p>Redes de Computadores: Gerenciamento e Protocolos</p>
    </header>

    <div id="result-summary">
        <h2 id="final-score">0 / 10</h2>
        <p class="score-text">Questões respondidas corretamente!</p>
    </div>

    <div id="quiz-content">
        <!-- Perguntas serão injetadas aqui via JS -->
    </div>

    <div class="submit-container">
        <button id="submit-btn" onclick="checkAnswers()">Finalizar Simulado</button>
    </div>

    <footer>
        Desenvolvido para fins de estudo técnico - Baseado na literatura de Tanenbaum e Kurose.
    </footer>
</div>

<script>
    const quizData = [
        {
            id: 1,
            assunto: "Arquitetura SNMP e Camada de Transporte",
            contexto: "Em um ambiente corporativo de alta disponibilidade, o monitoramento da infraestrutura é crítico. O protocolo SNMP (Simple Network Management Protocol) é o padrão de fato para essa tarefa. No entanto, sua implementação exige o conhecimento detalhado das portas e protocolos de transporte utilizados para garantir a correta configuração de Firewalls e Listas de Controle de Acesso (ACLs).",
            enunciado: "Considere um cenário onde um servidor de gerência (NMS) está configurado para monitorar um roteador de borda. O NMS realiza a coleta periódica de dados (polling) e o roteador está configurado para enviar notificações assíncronas de falhas críticas. Assinale a alternativa que indica corretamente os protocolos de transporte e as portas lógicas utilizadas, respectivamente, pelo Agente (no roteador) para escutar requisições do Gerente, e pelo Gerente (NMS) para escutar notificações (Traps) enviadas pelo Agente.",
            options: [
                "TCP porta 161; TCP porta 162.",
                "UDP porta 161; UDP porta 162.",
                "UDP porta 161; TCP porta 162.",
                "TCP porta 8080; UDP porta 161.",
                "UDP porta 162; UDP porta 161."
            ],
            correct: 1,
            resolution: "A implementação padrão do SNMP utiliza o protocolo UDP (User Datagram Protocol) devido à sua baixa carga sobre os dispositivos gerenciados. Por padrão, o Agente escuta na porta 161 para receber comandos do NMS (como GetRequest ou SetRequest), enquanto o Gerente escuta na porta 162 para receber alertas não solicitados (Traps)."
        },
        {
            id: 2,
            assunto: "Modelo FCAPS (ISO)",
            contexto: "A gestão de redes complexas exige uma abordagem estruturada. A ISO propôs o modelo FCAPS, que divide o gerenciamento em cinco áreas funcionais distintas.",
            enunciado: "Um administrador de rede foi incumbido de implementar um sistema para registrar o consumo de largura de banda por usuário na rede Wi-Fi, com o objetivo de identificar heavy users e implementar quotas de uso. Além disso, deve armazenar registros de sessão para auditoria. Esta atividade insere-se em qual categoria funcional do modelo FCAPS?",
            options: [
                "Gerenciamento de Falhas (Fault Management).",
                "Gerenciamento de Configuração (Configuration Management).",
                "Gerenciamento de Contabilização (Accounting Management).",
                "Gerenciamento de Desempenho (Performance Management).",
                "Gerenciamento de Segurança (Security Management)."
            ],
            correct: 2,
            resolution: "O Gerenciamento de Contabilização (Accounting Management) lida com a medição dos parâmetros de utilização de rede para fins de regulação de uso, análise de quotas, tarifação ou rateio de custos. Diferencia-se do Desempenho pois o foco aqui é o consumo/custo por usuário ou departamento."
        },
        {
            id: 3,
            assunto: "Estrutura da Informação (MIB e OID)",
            contexto: "O SNMP não define quais dados específicos existem em uma máquina, mas sim como esses dados são transportados. A definição dos dados reside na MIB.",
            enunciado: "Analise as afirmativas sobre a estrutura da informação de gerenciamento no SNMP:<br><br>I. A MIB é organizada em árvore, onde cada nó é identificado por um OID único.<br>II. A SMI define a sintaxe e os tipos de dados permitidos utilizando um subconjunto de ASN.1.<br>III. Objetos gerenciados na MIB podem ser apenas do tipo escalar, sendo impossível a representação de tabelas.",
            options: [
                "Apenas I.",
                "Apenas II.",
                "Apenas I e II.",
                "Apenas I e III.",
                "I, II e III."
            ],
            correct: 2,
            resolution: "As afirmativas I e II estão corretas. A afirmativa III é falsa pois a MIB suporta 'Objetos Tabulares' (Conceptual Tables), como a ifTable (tabela de interfaces) ou a ipRouteTable, implementadas através da repetição de OIDs com índices."
        },
        {
            id: 4,
            assunto: "Segurança no Gerenciamento (SNMPv3 vs SSH)",
            contexto: "A segurança do plano de gerenciamento é tão importante quanto a segurança do plano de dados. Protocolos legados apresentam vulnerabilidades críticas.",
            enunciado: "Um auditor identificou que os switches ainda utilizam SNMPv2c para monitoramento e Telnet para acesso remoto. Quais tecnologias devem substituir, respectivamente, os protocolos citados para garantir confidencialidade e autenticação forte?",
            options: [
                "SNMPv1 e RDP.",
                "SNMPv3 e SSH.",
                "HTTPS e FTP.",
                "RMON e SSH.",
                "SNMPv3 e HTTP."
            ],
            correct: 1,
            resolution: "O SNMPv3 introduz o modelo USM, que provê autenticação (hashing) e privacidade (criptografia). O SSH (Secure Shell) substitui o Telnet, criptografando toda a sessão de terminal remoto, protegendo contra interceptação de senhas."
        },
        {
            id: 5,
            assunto: "Ferramentas de Monitoramento (Zabbix)",
            contexto: "O uso de ferramentas open source como o Zabbix é comum. Compreender sua arquitetura é essencial para o dimensionamento.",
            enunciado: "Sobre a arquitetura de monitoramento do Zabbix Agente (Zabbix Agent), é correto afirmar que:",
            options: [
                "No modo 'Passive Check', o agente toma a iniciativa de conectar-se ao servidor Zabbix.",
                "O Zabbix Proxy é um componente obrigatório que substitui o banco de dados principal.",
                "No modo 'Active Check', o agente conecta-se ao servidor para solicitar a lista de itens e, posteriormente, envia os dados coletados.",
                "O Zabbix não suporta o monitoramento via SNMP, dependendo exclusivamente de agentes.",
                "A comunicação entre Servidor e Agente ocorre sempre via protocolo UDP."
            ],
            correct: 2,
            resolution: "No modo Ativo (Active Check), o agente é quem inicia a conexão com o servidor Zabbix, solicita a configuração e envia os dados em lotes. Isso é útil para hosts atrás de firewalls ou para reduzir a carga de processamento do servidor central."
        },
        {
            id: 6,
            assunto: "Protocolos de Aplicação",
            contexto: "A associação correta entre protocolos e funcionalidades é recorrente em provas da banca.",
            enunciado: "Associe: (1) SMTP, (2) ICMP, (3) SSH, (4) Syslog.<br>( ) Camada de rede para diagnóstico (ping).<br>( ) Padrão para envio de logs de eventos para servidor central.<br>( ) Transferência de correio eletrônico.<br>( ) Acesso remoto com criptografia.",
            options: [
                "2, 4, 1, 3.",
                "1, 3, 2, 4.",
                "2, 1, 4, 3.",
                "3, 4, 1, 2.",
                "4, 2, 3, 1."
            ],
            correct: 0,
            resolution: "A sequência correta é: ICMP (2) para diagnóstico; Syslog (4) para logs; SMTP (1) para e-mail e SSH (3) para acesso seguro."
        },
        {
            id: 7,
            assunto: "Operações SNMP (PDUs)",
            contexto: "O funcionamento interno do SNMP baseia-se na troca de unidades de dados de protocolo (PDUs).",
            enunciado: "Um analista observa um pacote SNMP enviado por um Gerente com destino a um Agente para alterar uma configuração específica (ex: desabilitar interface). Qual PDU corresponde a esta operação de escrita?",
            options: [
                "GetRequest.",
                "GetNextRequest.",
                "SetRequest.",
                "Trap.",
                "GetResponse."
            ],
            correct: 2,
            resolution: "A PDU SetRequest é o comando de 'escrita' do SNMP, permitindo que o Gerente altere valores de variáveis gerenciadas no Agente (desde que possua permissões adequadas)."
        },
        {
            id: 8,
            assunto: "Gerenciamento de Falhas e Desempenho",
            contexto: "Distinguir entre problemas de conectividade e problemas de qualidade é essencial.",
            enunciado: "Um administrador observa que a latência em um link VoIP está alta (jitter), embora não haja queda de conexão. Qual a abordagem técnica mais adequada para monitorar isso via protocolos padrão?",
            options: [
                "Utilizar o comando ping continuamente salvando em TXT.",
                "Configurar o SNMP para coletar apenas o status operacional (up/down).",
                "Implementar sondas (probes) IP SLA e coletar as métricas via SNMP para o sistema de gerência.",
                "Aumentar a largura de banda do link, pois isso resolve automaticamente.",
                "Utilizar o protocolo FTP para medir o tempo de transferência."
            ],
            correct: 2,
            resolution: "O monitoramento de QoS exige tráfego sintético preciso. O IP SLA gera pacotes com timestamps para medir jitter e latência, cujos resultados são armazenados em MIBs e podem ser lidos pelo sistema de gerência via SNMP."
        },
        {
            id: 9,
            assunto: "Segmentação de Rede (VLAN de Gerência)",
            contexto: "Boas práticas recomendam a separação dos planos de dados e gerenciamento.",
            enunciado: "Com relação à criação de uma VLAN de Gerenciamento dedicada, é correto afirmar:",
            options: [
                "Deve-se utilizar a VLAN 1 (default) para simplificar a administração.",
                "Permite isolar o tráfego de acesso aos equipamentos (SSH, SNMP) do tráfego dos usuários, permitindo ACLs restritivas.",
                "O uso de VLAN exclusiva impede o switch de ser monitorado via SNMP.",
                "Dispositivos na VLAN de gerência não precisam de endereço IP.",
                "A VLAN de gerenciamento deve ser a mesma da rede de visitantes."
            ],
            correct: 1,
            resolution: "Isolar o gerenciamento em uma VLAN própria é uma medida fundamental de segurança (Hardening), pois permite filtrar quem pode acessar o plano de controle dos ativos, protegendo-os de usuários internos mal-intencionados."
        },
        {
            id: 10,
            assunto: "Evolução do SNMP (Traps vs Informs)",
            contexto: "A confiabilidade na entrega de alertas é um requisito em ambientes críticos.",
            enunciado: "O SNMPv2 introduziu a operação InformRequest. Qual a principal diferença técnica entre uma Trap e um Inform?",
            options: [
                "A Trap é enviada pelo Gerente, o Inform pelo Agente.",
                "A Trap utiliza TCP, o Inform utiliza UDP.",
                "A Trap não é confirmada (fire-and-forget); o Inform exige uma confirmação (ack) do gerente.",
                "A Trap é criptografada, o Inform é texto claro.",
                "Traps são para desempenho, Informs para hardware."
            ],
            correct: 2,
            resolution: "Diferente da Trap, o InformRequest requer uma confirmação de recebimento do Gerente. Se o Agente não receber o 'ack', ele retransmite a mensagem, garantindo confiabilidade na camada de aplicação sobre o transporte UDP."
        }
    ];

    function renderQuiz() {
        const container = document.getElementById('quiz-content');
        container.innerHTML = quizData.map((q, index) => `
            <div class="question-card" id="q-card-${index}">
                <span class="question-header">Questão ${index + 1}: ${q.assunto}</span>
                <div class="context">${q.contexto}</div>
                <div class="enunciado">${q.enunciado}</div>
                <ul class="options">
                    ${q.options.map((opt, optIndex) => `
                        <li class="option-item" onclick="selectOption(${index}, ${optIndex})">
                            <input type="radio" name="q${index}" id="q${index}o${optIndex}" value="${optIndex}">
                            <label for="q${index}o${optIndex}"><strong>${String.fromCharCode(65 + optIndex)})</strong> ${opt}</label>
                        </li>
                    `).join('')}
                </ul>
                <div class="resolution-box" id="res-${index}">
                    <h4>Resolução e Comentários</h4>
                    <p>${q.resolution}</p>
                </div>
            </div>
        `).join('');
    }

    function selectOption(qIndex, optIndex) {
        // Desmarcar todos daquela questão visualmente
        const items = document.querySelectorAll(`#q-card-${qIndex} .option-item`);
        items.forEach(item => item.classList.remove('selected'));
        
        // Marcar o rádio correspondente
        const radio = document.getElementById(`q${qIndex}o${optIndex}`);
        if(radio) {
            radio.checked = true;
            items[optIndex].classList.add('selected');
        }
    }

    function checkAnswers() {
        let score = 0;
        const total = quizData.length;

        quizData.forEach((q, index) => {
            const selected = document.querySelector(`input[name="q${index}"]:checked`);
            const card = document.getElementById(`q-card-${index}`);
            const resolution = document.getElementById(`res-${index}`);
            const optionsItems = card.querySelectorAll('.option-item');

            // Mostrar resolução
            resolution.style.display = 'block';

            if (selected) {
                const answer = parseInt(selected.value);
                if (answer === q.correct) {
                    score++;
                    optionsItems[answer].classList.add('correct');
                } else {
                    optionsItems[answer].classList.add('wrong');
                    optionsItems[q.correct].classList.add('correct');
                }
            } else {
                // Se não respondeu, mostra a correta
                optionsItems[q.correct].classList.add('correct');
            }
        });

        // Mostrar resumo
        const summary = document.getElementById('result-summary');
        const scoreDisplay = document.getElementById('final-score');
        scoreDisplay.innerText = `${score} / ${total}`;
        summary.style.display = 'block';
        
        // Scroll para o topo para ver o resultado
        window.scrollTo({ top: 0, behavior: 'smooth' });

        // Mudar botão
        const btn = document.getElementById('submit-btn');
        btn.innerText = "Simulado Finalizado";
        btn.disabled = true;
        btn.style.opacity = "0.7";
        btn.style.cursor = "default";
    }

    // Inicialização
    window.onload = renderQuiz;
</script>

</body>
</html>