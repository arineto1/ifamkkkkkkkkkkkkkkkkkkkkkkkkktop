<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulado Hardware - Professor EBTT</title>
    <style>
        :root {
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --text-primary: #2d3436;
            --text-secondary: #636e72;
            --accent-color: #0984e3;
            --success: #27ae60;
            --error: #d63031;
            --border-color: #dfe6e9;
            --font-main: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            font-family: var(--font-main);
            line-height: 1.6;
            padding: 2rem 1rem;
        }

        .container {
            max-width: 850px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 3rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 1.5rem;
        }

        header h1 {
            font-size: 1.8rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        header p {
            color: var(--text-secondary);
            font-style: italic;
        }

        .question-card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border: 1px solid var(--border-color);
            transition: transform 0.2s;
        }

        .question-text {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            display: block;
        }

        .options-list {
            list-style: none;
        }

        .option-item {
            margin-bottom: 0.8rem;
            display: flex;
            align-items: flex-start;
            cursor: pointer;
            padding: 0.8rem;
            border-radius: 6px;
            border: 1px solid transparent;
            transition: all 0.2s;
        }

        .option-item:hover {
            background-color: #f1f2f6;
        }

        .option-item input {
            margin-top: 0.4rem;
            margin-right: 1rem;
            cursor: pointer;
        }

        .option-label {
            cursor: pointer;
            flex: 1;
        }

        /* Classes para o resultado */
        .option-item.correct {
            background-color: #e8f5e9;
            border-color: var(--success);
        }

        .option-item.wrong {
            background-color: #ffebee;
            border-color: var(--error);
        }

        .resolution-box {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background-color: #f0f7ff;
            border-left: 4px solid var(--accent-color);
            display: none;
            font-size: 0.95rem;
        }

        .resolution-box h4 {
            margin-bottom: 0.5rem;
            color: var(--accent-color);
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 1px;
        }

        #submit-btn {
            display: block;
            width: 100%;
            padding: 1.2rem;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            margin-bottom: 4rem;
        }

        #submit-btn:hover {
            background-color: #0873c4;
        }

        #result-summary {
            display: none;
            text-align: center;
            padding: 2rem;
            background: var(--card-bg);
            border-radius: 8px;
            margin-bottom: 2rem;
            border: 2px solid var(--accent-color);
        }

        .score-display {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--accent-color);
        }

        .feedback-msg {
            font-size: 1.2rem;
            margin-top: 0.5rem;
        }

        footer {
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 2rem;
        }

        /* Estilo para fórmulas/códigos inline */
        code {
            background: #eee;
            padding: 2px 4px;
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
        }

        @media (max-width: 600px) {
            .question-card {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Simulado Técnico: Hardware e Armazenamento</h1>
        <p>Perfil: Carreira EBTT | Banca: Fundação CEFETMINAS</p>
    </header>

    <div id="result-summary">
        <div>Seu desempenho:</div>
        <div class="score-display" id="final-score">0 / 10</div>
        <div class="feedback-msg" id="feedback-msg"></div>
    </div>

    <form id="quiz-form">
        <div id="questions-container">
            <!-- As questões serão inseridas via JavaScript -->
        </div>

        <button type="button" id="submit-btn" onclick="checkAnswers()">Finalizar e Ver Resoluções</button>
    </form>

    <footer>
        Desenvolvido para fins de estudo - Analista de Concursos de Alto Nível
    </footer>
</div>

<script>
    const questions = [
        {
            id: 1,
            q: "1. A arquitetura de armazenamento em servidores de alto desempenho passou por uma mudança de paradigma com o protocolo NVMe. Considerando as especificações técnicas da NVM Express Organization e as diferenças entre AHCI e NVMe, analise as afirmativas:\n\nI. O AHCI apresenta gargalo em sistemas multicore por ter fila única com profundidade de 32 comandos, exigindo locking de CPU.\nII. O NVMe suporta até 65.535 filas de I/O, onde cada fila pode conter até 64.000 comandos, permitindo operação lockless.\nIII. A latência de software stack do driver NVMe é reduzida para aprox. 2,8 µs contra 6,0 µs do AHCI.\nIV. Dispositivos NVMe garantem compatibilidade retroativa nativa com comandos SCSI.",
            options: [
                "I e II.",
                "I, II e III.",
                "II e IV.",
                "III e IV.",
                "I, II e IV."
            ],
            correct: 1, // Letra B (Índice 1)
            resolution: "Os itens I, II e III estão corretos. O NVMe foi desenhado para paralelismo (64k filas). O item IV está incorreto pois o NVMe possui seu próprio conjunto de comandos e não utiliza o conjunto de comandos SCSI nativamente."
        },
        {
            id: 2,
            q: "2. Sobre as gerações do padrão PCIe (3.0, 4.0 e 5.0), assinale a alternativa tecnicamente CORRETA:",
            options: [
                "A transição do 3.0 para o 4.0 manteve o clock e mudou apenas a codificação de 8b/10b para 128b/130b.",
                "O padrão PCIe 5.0 opera com 32 GT/s por lane. Um slot x16 oferece largura de banda bidirecional teórica de aprox. 128 GB/s.",
                "O PCIe 5.0 abandonou a topologia ponto-a-ponto em favor de uma topologia de barramento compartilhado.",
                "A codificação 128b/130b insere bits de paridade que reduzem a eficiência em comparação com o 8b/10b.",
                "Um dispositivo PCIe 4.0 conectado a um slot PCIe 3.0 operará na velocidade Gen 4 via overclock automático do Root Complex."
            ],
            correct: 1, // Letra B
            resolution: "A largura de banda do PCIe 5.0 x16 é de aproximadamente 64 GB/s em cada direção, totalizando 128 GB/s bidirecionais. A codificação 128b/130b é usada desde a Gen 3 para reduzir o overhead de 20% para 1.5%."
        },
        {
            id: 3,
            q: "3. Assinale a alternativa que apresenta a ordenação CORRETA das tecnologias NAND Flash, da maior durabilidade (ciclos P/E) para a menor durabilidade:",
            options: [
                "QLC > TLC > MLC > SLC",
                "SLC > MLC > TLC > QLC",
                "MLC > SLC > QLC > TLC",
                "TLC > QLC > SLC > MLC",
                "SLC > QLC > TLC > MLC"
            ],
            correct: 1, // Letra B
            resolution: "Quanto menos bits por célula, maior a margem de erro permitida e menor o desgaste do óxido de tunelamento. Ordem: SLC (1 bit) > MLC (2 bits) > TLC (3 bits) > QLC (4 bits)."
        },
        {
            id: 4,
            q: "4. Considere um sistema com SSD A (Pistas CPU), SSD B (PCH) e SSD C (PCH) via DMI 4.0 x8. Em carga máxima simultânea, qual o comportamento esperado?",
            options: [
                "O sistema operará sem gargalos, pois o DMI 4.0 x8 fornece 16 GB/s, suficiente para os SSDs B e C.",
                "O SSD A operará em velocidade máxima, mas os SSDs B e C terão seu desempenho agregado limitado pela largura de banda da interface DMI.",
                "O processador ativará Bifurcation dinâmico para realocar pistas da GPU para o Chipset.",
                "A arquitetura DMI utiliza compressão LZ4 para dobrar virtualmente a largura de banda.",
                "O protocolo NVMe desativa automaticamente o SSD C para priorizar o SSD B."
            ],
            correct: 1, // Letra B
            resolution: "O SSD A tem conexão direta com a CPU. Já o SSD B e C compartilham o link DMI entre o Chipset e a CPU. Como cada SSD Gen4 x4 pode chegar a ~7.5GB/s, dois deles somam 15GB/s, quase saturando os 16GB/s teóricos do DMI, criando contenção se houver outros tráfegos (USB, Rede, etc)."
        },
        {
            id: 5,
            q: "5. Sobre a matemática e o funcionamento lógico do RAID 6, é CORRETO afirmar:",
            options: [
                "Utiliza paridade tripla via XOR, permitindo falha de 3 discos.",
                "A proteção contra falha dupla é obtida via paridade 'P' (XOR) e 'Q' (Campos de Galois/Reed-Solomon), gerando maior penalidade de escrita.",
                "Diferente do RAID 5, o RAID 6 utiliza dois discos físicos dedicados exclusivamente para paridade.",
                "A capacidade útil é dada por (N-1) x C, igual ao RAID 5.",
                "O RAID 6 elimina a necessidade de cache com bateria por garantir atomicidade das escritas."
            ],
            correct: 1, // Letra B
            resolution: "O RAID 6 suporta a perda de 2 discos. Ele usa duas paridades distintas (P e Q). O cálculo da paridade Q exige álgebra de campos finitos, sendo computacionalmente mais caro que o simples XOR da paridade P."
        },
        {
            id: 6,
            q: "6. Sobre as especificações físicas e elétricas dos conectores M.2 Key B e Key M, analise:\nI. Key M suporta até 4 pistas PCIe e é predominante em NVMe de alta performance.\nII. Key B suporta até 2 pistas PCIe e interface SATA.\nIII. Um SSD 'Key B+M' pode ser inserido em ambos, mas sua performance NVMe estará limitada a 2 pistas (x2).",
            options: [
                "Apenas I.",
                "Apenas II.",
                "Apenas I e III.",
                "Apenas II e III.",
                "I, II e III."
            ],
            correct: 4, // Letra E
            resolution: "Todas as afirmativas estão corretas. A 'chave' física define a pinagem e, consequentemente, o número máximo de lanes PCIe suportadas."
        },
        {
            id: 7,
            q: "7. Assinale a alternativa que descreve corretamente a relação técnica entre SAS e SATA nas camadas física e de protocolo:",
            options: [
                "Controladoras SAS suportam discos SATA via STP, mas o inverso não é verdadeiro por impedimento físico e de protocolo.",
                "O SAS utiliza 14 pinos para transmissão paralela e o SATA 7 pinos para serial.",
                "Drives SATA modernos implementaram Multipath I/O nativo via eSATAp, igualando ao SAS.",
                "O protocolo SAS limita o cabeamento a 1 metro, idêntico ao SATA.",
                "O SAS utiliza voltagens menores (200mV) que o SATA (500mV)."
            ],
            correct: 0, // Letra A
            resolution: "O conector SAS é desenhado para aceitar SATA (Backwards compatibility), mas o conector SATA possui uma barreira física (key) que impede o encaixe de um disco SAS. Além disso, o SAS utiliza o protocolo SCSI, que controladoras SATA não entendem."
        },
        {
            id: 8,
            q: "8. Sobre as especificações das gerações LTO-8 e LTO-9 (Fitas Magnéticas), assinale a correta:",
            options: [
                "O LTO-9 mantém a compatibilidade de leitura N-2 (lê LTO-7).",
                "Unidades LTO-8 não leem LTO-6, mas introduziram o formato 'Type M' que permite 9 TB em mídias LTO-7.",
                "A capacidade nativa de um cartucho LTO-9 é de 45 TB.",
                "Drives LTO-9 abandonaram interfaces SAS em favor de Thunderbolt 4.",
                "A compatibilidade de escrita do LTO-9 é restrita apenas a mídias LTO-9."
            ],
            correct: 1, // Letra B
            resolution: "A partir do LTO-8, a regra de compatibilidade mudou (N-1 apenas). O LTO-8 não lê LTO-6. O recurso Type M (M8) permite usar mídias LTO-7 com densidade aumentada em drives LTO-8."
        },
        {
            id: 9,
            q: "9. Qual é o principal benefício técnico arquitetural do Zoned Namespaces (ZNS) no NVMe 2.0?",
            options: [
                "Permite executar código arbitrário do usuário no controlador (Computational Storage).",
                "Elimina Garbage Collection interno agressivo e reduz a Write Amplification ao impor escritas sequenciais em zonas.",
                "Virtualiza o SSD como um disco rígido magnético SMR para compatibilidade com Windows 7.",
                "Segmenta o SSD em zonas de segurança criptográfica AES-256 independentes.",
                "Permite acesso simultâneo via PCIe, SAS e SATA no mesmo dispositivo físico."
            ],
            correct: 1, // Letra B
            resolution: "O ZNS alinha o software à física da NAND Flash. Ao forçar escritas sequenciais, o controlador não precisa mover dados constantemente para liberar blocos (Garbage Collection), reduzindo o desgaste e aumentando o throughput."
        },
        {
            id: 10,
            q: "10. Para que VMs processem pacotes de rede com latência próxima à nativa em uma NIC 10GbE, qual tecnologia deve ser usada?",
            options: [
                "PCIe Bifurcation (x4x4x4x4).",
                "Intel RST (Rapid Storage Technology).",
                "SR-IOV (Single Root I/O Virtualization).",
                "NVMe-oF (NVMe over Fabrics).",
                "Jumbo Frames com MTU 9000."
            ],
            correct: 2, // Letra C
            resolution: "O SR-IOV permite que uma placa física crie 'Funções Virtuais' (VFs) que são entregues diretamente à VM. A VM acessa o hardware diretamente via DMA (através da IOMMU), ignorando o overhead do switch virtual do Hypervisor."
        }
    ];

    function renderQuestions() {
        const container = document.getElementById('questions-container');
        questions.forEach((q, qIndex) => {
            const card = document.createElement('div');
            card.className = 'question-card';
            card.id = `q-card-${qIndex}`;

            const qText = document.createElement('span');
            qText.className = 'question-text';
            qText.innerText = q.q;
            card.appendChild(qText);

            const optionsList = document.createElement('ul');
            optionsList.className = 'options-list';

            q.options.forEach((opt, optIndex) => {
                const li = document.createElement('li');
                li.className = 'option-item';
                li.id = `opt-${qIndex}-${optIndex}`;

                const input = document.createElement('input');
                input.type = 'radio';
                input.name = `q${qIndex}`;
                input.id = `q${qIndex}o${optIndex}`;
                input.value = optIndex;

                const label = document.createElement('label');
                label.className = 'option-label';
                label.htmlFor = `q${qIndex}o${optIndex}`;
                label.innerText = opt;

                li.appendChild(input);
                li.appendChild(label);
                optionsList.appendChild(li);

                // Clique na linha toda seleciona o rádio
                li.addEventListener('click', () => {
                    input.checked = true;
                });
            });

            card.appendChild(optionsList);

            // Box de Resolução (escondido)
            const resBox = document.createElement('div');
            resBox.className = 'resolution-box';
            resBox.id = `res-${qIndex}`;
            resBox.innerHTML = `<h4>Resolução Comentada</h4><p>${q.resolution}</p>`;
            card.appendChild(resBox);

            container.appendChild(card);
        });
    }

    function checkAnswers() {
        let score = 0;
        const form = document.getElementById('quiz-form');
        
        questions.forEach((q, qIndex) => {
            const selected = form.querySelector(`input[name="q${qIndex}"]:checked`);
            const resolutionBox = document.getElementById(`res-${qIndex}`);
            
            // Mostrar resolução
            resolutionBox.style.display = 'block';

            // Marcar correto e errado
            q.options.forEach((opt, optIndex) => {
                const item = document.getElementById(`opt-${qIndex}-${optIndex}`);
                if (optIndex === q.correct) {
                    item.classList.add('correct');
                }
            });

            if (selected) {
                const answerIndex = parseInt(selected.value);
                if (answerIndex === q.correct) {
                    score++;
                } else {
                    document.getElementById(`opt-${qIndex}-${answerIndex}`).classList.add('wrong');
                }
            }
        });

        // Mostrar resumo
        const summary = document.getElementById('result-summary');
        const scoreDisplay = document.getElementById('final-score');
        const feedback = document.getElementById('feedback-msg');
        
        summary.style.display = 'block';
        scoreDisplay.innerText = `${score} / ${questions.length}`;
        
        if (score >= 8) {
            feedback.innerText = "Excelente! Você tem um domínio sólido sobre Hardware e Armazenamento.";
            feedback.style.color = "var(--success)";
        } else if (score >= 5) {
            feedback.innerText = "Bom desempenho. Revise os pontos onde houve dúvida para garantir a aprovação.";
            feedback.style.color = "var(--accent-color)";
        } else {
            feedback.innerText = "Continue estudando. Os temas de barramento e protocolos NVMe/SAS são recorrentes na CEFETMINAS.";
            feedback.style.color = "var(--error)";
        }

        // Desativar rádio buttons
        const allInputs = form.querySelectorAll('input');
        allInputs.forEach(input => input.disabled = true);
        
        // Mudar botão
        const btn = document.getElementById('submit-btn');
        btn.innerText = "Simulado Concluído";
        btn.disabled = true;
        btn.style.backgroundColor = "#ccc";

        // Scroll para o topo para ver o resultado
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Inicializar
    window.onload = renderQuestions;
</script>

</body>
</html>